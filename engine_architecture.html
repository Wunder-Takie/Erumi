<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Erumi ì—”ì§„ ì•„í‚¤í…ì²˜</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            color: #fff;
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2rem;
        }
        .mermaid {
            background: #fff;
            border-radius: 16px;
            padding: 30px;
            max-width: 1400px;
            margin: 0 auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        .legend {
            max-width: 1400px;
            margin: 30px auto 0;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        .legend-item {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }
        .legend-item h3 {
            margin: 0 0 5px;
            font-size: 0.9rem;
            color: #9ca3af;
        }
        .legend-item p {
            margin: 0;
            font-size: 1rem;
        }
    </style>
</head>
<body>
    <h1>ğŸ¯ Erumi ì´ë¦„ ì¶”ì²œ ì—”ì§„ ì•„í‚¤í…ì²˜</h1>
    
    <div class="mermaid">
flowchart TB
    subgraph UI["ğŸ–¥ï¸ UI Layer"]
        A["UserFlow.tsx<br/>StoryApp.tsx<br/>DevApp.tsx"]
    end
    
    subgraph MAIN["âš™ï¸ ë©”ì¸ ì—”ì§„"]
        B["namingUtils.js<br/><b>generateNames()</b><br/>~2,050ì¤„"]
    end
    
    subgraph SAJU["ğŸ”® ì‚¬ì£¼ ê³„ì‚°"]
        C1["sajuUtils.js<br/>calculateSaju()"]
        C2["kasiAdapter.js<br/>KASI API"]
        C3["saju_data.json<br/>ë¡œì»¬ í´ë°±"]
    end
    
    subgraph SCORING["ğŸ“Š ì ìˆ˜ ê³„ì‚°"]
        D1["suriPatterns.js<br/>4ê²© ìˆ˜ë¦¬"]
        D2["pronunciationUtils.js<br/>ë°œìŒ ì˜¤í–‰/ìŒì–‘"]
        D3["globalNameCheck.js<br/>ì˜ì–´ ë°œìŒ"]
    end
    
    subgraph FILTER["ğŸš« í•„í„°ë§"]
        E1["modern_preferences.json<br/>ì°¨ë‹¨/ê°ì "]
        E2["phonetic_rules.json<br/>ë°œìŒ ê·œì¹™ v2.0"]
        E3["bunpa_characters.json<br/>ë¶„íŒŒ í•œì"]
    end
    
    subgraph DATA["ğŸ’¾ ë°ì´í„°"]
        F1["hanja_db.json<br/>í•œì DB"]
        F2["surnames.json<br/>ì„±ì”¨"]
        F3["name_popularity.json<br/>ì¸ê¸°ë„"]
    end
    
    subgraph OUTPUT["ğŸ“¤ ì¶œë ¥"]
        G1["narrativeUtils.js<br/>ìŠ¤í† ë¦¬"]
        G2["llmEvaluator.js<br/>LLM í‰ê°€"]
        G3["NameReport<br/>UI ì»´í¬ë„ŒíŠ¸"]
    end
    
    A -->|"ì‚¬ìš©ì ì…ë ¥"| B
    B -->|"ìƒë…„ì›”ì¼"| C1
    C1 -->|"API í˜¸ì¶œ"| C2
    C2 -.->|"ì‹¤íŒ¨ ì‹œ"| C3
    B --> D1 & D2 & D3
    B --> E1 & E2 & E3
    B --> F1 & F2 & F3
    B -->|"ê²°ê³¼"| G1 & G2
    G1 & G2 --> G3
    </div>
    
    <div class="legend">
        <div class="legend-item">
            <h3>UI ì§„ì…ì </h3>
            <p>UserFlow, StoryApp, DevApp</p>
        </div>
        <div class="legend-item">
            <h3>í•µì‹¬ ì—”ì§„</h3>
            <p>namingUtils.js (2,050ì¤„)</p>
        </div>
        <div class="legend-item">
            <h3>ì‚¬ì£¼ ê³„ì‚°</h3>
            <p>KASI API + ë¡œì»¬ í´ë°±</p>
        </div>
        <div class="legend-item">
            <h3>ì ìˆ˜ ìš”ì†Œ</h3>
            <p>9ê°œ ìš”ì†Œ í•©ì‚°</p>
        </div>
        <div class="legend-item">
            <h3>í•„í„°ë§</h3>
            <p>7ë‹¨ê³„ í•„í„°</p>
        </div>
        <div class="legend-item">
            <h3>ë°ì´í„° íŒŒì¼</h3>
            <p>15ê°œ JSON íŒŒì¼</p>
        </div>
    </div>

    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                curve: 'basis',
                padding: 20
            }
        });
    </script>
</body>
</html>
